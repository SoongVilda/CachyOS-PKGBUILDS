# Maintainer: Michael Bolden <me@sm9.dev>

pkgname=cachyos-hooks
pkgver="$(date +%Y.%m)"
pkgrel=4
pkgdesc='Cachy OS Pacman Hooks'
groups=('cachyos')
arch=('any')
license=('GPL3')
url=https://github.com/cachyos/$pkgname/master
_url=https://raw.githubusercontent.com/cachyos/$pkgname/master

source=(
  $_url/os-release.hook
  $_url/lsb-release.hook
  $_url/${pkgname}.hook
  $_url/${pkgname}-runner
  $_url/cachyos-reboot-required
  $_url/cachyos-check-reboot-required
  $_url/cachyos-reboot-required.hook
)

sha512sums=('e1c475848e7d35db70e1a8f07766579947ad09c655d536d31eed97a309d847b33085cb859c65cb3747f6427e290f938b11c48ac4f20ee539ad5cf226fe434761'
            '42685962732b654653c48cbe48c44dd9dc69696f1bee521ebb61c471d05a65dff3308f42316d54dd3c20a9423055b32bed259c9631af1abc34b1d138be60f2d7'
            '9b6bb550017e704118c67341c4aa33a6cc9025acebd4e66f4787efd7332fb4e1c1a680ad858ccd90f1ac933b4511b42d2a507291a75d2ae2199d7eff3cad7b58'
            'ff5878de3fb487a09d1ebd6096b2727aafc29bcc95d3a3dda6b469dca1f2c40534c2ebb8d909d5ed557e67e98f74207767ccb127033aa20b620557043dba157f'
            'f6326e1fd04ea1cb91f8ca17806d9e43b63a1397ebaddc0ff23f66d56d072a47181f448eccb145628d1db964fb3dac1ea6154a4ef7a8fefaa15d6b0eddfe935f'
            'f417a16ef193954e9d0c9b403c2ffbaa7cf834d36e030c47c59880b57533265307bb5b43738257a4f64e9572ab2b65ae244644125fe08edb360f497180c5ce2b'
            '9d8431016b91c38bdc5cadf8a9bd499a463489a955081a7a0f86e4b94cc62b90034f114f846f9e9320292341441c85e175f69c2585a51dbee0af7fc7ab84f982')

package() {
  local hooks=$pkgdir/usr/share/libalpm/hooks
  local bin=$pkgdir/usr/bin

  install -Dm644 lsb-release.hook                 $hooks/lsb-release.hook
  install -Dm644 os-release.hook                  $hooks/os-release.hook
  install -Dm644 ${pkgname}.hook                  $hooks/${pkgname}.hook
  install -Dm644 cachyos-reboot-required.hook     $hooks/cachyos-reboot-required.hook

  install -Dm755 cachyos-reboot-required          $bin/cachyos-reboot-required
  install -Dm755 cachyos-check-reboot-required    $bin/cachyos-check-reboot-required
  install -Dm755 ${pkgname}-runner                $bin/${pkgname}-runner
}
